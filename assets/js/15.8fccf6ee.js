(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{223:function(e,a,t){"use strict";t.r(a);var r=t(2),s=Object(r.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"框架详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#框架详解","aria-hidden":"true"}},[e._v("#")]),e._v(" 框架详解")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("正如在框架设计的初心上所说，市面上已经那么多的框架了，还造什么轮子，再次重申一下。造轮子不是目的，造轮子的过程中汲取到知识才是目的，共勉。")]),e._v(" "),t("h2",{attrs:{id:"框架的组织方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#框架的组织方式","aria-hidden":"true"}},[e._v("#")]),e._v(" 框架的组织方式")]),e._v(" "),t("p",[e._v("kickpeach项目目录参考Laravel的文件组织方式进行组织，采取组件化开发，灵活扩展升级每个组件，主要由以下几个组件完成：")]),e._v(" "),t("p",[e._v("可查看"),t("a",{attrs:{href:"https://github.com/KickPeach",target:"_blank",rel:"noopener noreferrer"}},[e._v("组织"),t("OutboundLink")],1),e._v("进行源码的阅读")]),e._v(" "),t("div",{staticClass:"language-cmd extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("kickpeach　\n        kickPeach----\x3e 最终可以使用的框架\n        framework----\x3e 框架的核心文件\n        queue----\x3e 任务队列组件\n        database----\x3e 数据库组件\n        mdCalls----\x3e 提供模块化服务的组件\n        kickpeach.github.io----\x3e框架的使用文档\n")])])]),t("p",[e._v("其他模块都有模块的文档")]),e._v(" "),t("h2",{attrs:{id:"框架的设计思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#框架的设计思路","aria-hidden":"true"}},[e._v("#")]),e._v(" 框架的设计思路")]),e._v(" "),t("div",{staticClass:"language-cmd extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n入口文件\n        ----\x3e 注册错误(和异常)处理函数\n        ----\x3e 加载配置文件\n        ----\x3e 请求\n        ----\x3e 路由　\n        ----\x3e中间件\n        ----\x3e（控制器 <----\x3e 数据模型）\n        ----\x3e 响应\n        ----\x3e 视图渲染数据\n")])])]),t("ul",[t("li",[t("p",[e._v("阅读源码的方式")]),e._v(" "),t("p",[e._v("composer create kickpeach/kickpeach testkickpeach,composer update下载载源码下来之后，按照上面流程，可以看到框架源码的具体实现，从index.php入口看起。kickpeach只是framework的扩展，基于framework，完全可以自定义有自己风格的框架。\n核心源码都在framework,在看源码的时候，你就会深入了解到什么叫self,static，继承，抽象，与接口。")])]),e._v(" "),t("li",[t("p",[e._v("模块化组织\n个人觉得Laravel的容器太重，虽然好用，但是还是不太想用这个，因此，这里使用了MdCalls组件来解决依赖方式，可见框架中mdcalls目录，mdcalls支持rpc与框架内调用，内置了database,queue以及redis服务，具体使用方式可见文档")])]),e._v(" "),t("li",[t("p",[e._v("自动加载")]),e._v(" "),t("p",[e._v("使用composer和命名空间，遵循psr-4规范")])]),e._v(" "),t("li",[t("p",[e._v("异常模块")]),e._v(" "),t("p",[e._v("错误捕获，异常捕获，让错误可以被异常一样捕捉，并且友好的提示错误，关键函数set_error_handler，set_exception_handler，register_shutdown_function")])]),e._v(" "),t("li",[t("p",[e._v("路由\n解析请求，基于fastroute组件开发，支持自定义路由以及默认路由，为了不占内存，缓存了路由，获得待处理的的模块，控制器和方法")])]),e._v(" "),t("li",[t("p",[e._v("控制器\n获取每个控制器定义的中间件，先经过中间件解析处理，最后才控制器")])]),e._v(" "),t("li",[t("p",[e._v("中间件\n借鉴了Laravel的pipeline编写了路由中间件")])]),e._v(" "),t("li",[t("p",[e._v("响应\n模板引擎使用twig组件，支持变量赋值以及模板，支持json响应")])]),e._v(" "),t("li",[t("p",[e._v("数据库\n采用第三方database组件方式，利用mdcalls提供服务")])]),e._v(" "),t("li",[t("p",[e._v("其他友好函数\n日志工具类，文件读取文件，日志读取类，配置文件读取类")])]),e._v(" "),t("li",[t("p",[e._v("queue\n任务队列组件，支持延时队列以及失败任务重试")])])]),e._v(" "),t("h2",{attrs:{id:"todo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#todo","aria-hidden":"true"}},[e._v("#")]),e._v(" TODO")]),e._v(" "),t("ul",[t("li",[e._v("[ ] 请求参数的验证模块")]),e._v(" "),t("li",[e._v("[ ] 集成"),t("a",{attrs:{href:"https://github.com/maximebf/php-debugbar",target:"_blank",rel:"noopener noreferrer"}},[e._v("php-debugbar"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("[ ] 使用kickpeach做一个demo")])]),e._v(" "),t("h2",{attrs:{id:"帮助kickpeach改进"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#帮助kickpeach改进","aria-hidden":"true"}},[e._v("#")]),e._v(" 帮助kickpeach改进")]),e._v(" "),t("p",[e._v("欢迎给Kickpeach提issue:"),t("a",{attrs:{href:"https://github.com/KickPeach/kickPeach/issues",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/KickPeach/kickPeach/issues"),t("OutboundLink")],1)])])},[],!1,null,null,null);a.default=s.exports}}]);